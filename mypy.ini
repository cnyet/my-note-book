[mypy]
# 基础配置
python_version = 3.14
warn_return_any = True
warn_unused_configs = True
disallow_untyped_defs = True
disallow_any_unimported = False
no_implicit_optional = True
warn_redundant_casts = True
warn_unused_ignores = True
warn_no_return = True
warn_unreachable = True
strict_equality = True

# 错误报告
show_error_context = True
show_column_numbers = True
show_error_codes = True
pretty = True
color_output = True
error_summary = True

# 导入发现
namespace_packages = True
ignore_missing_imports = False
follow_imports = normal
explicit_package_bases = True

# 严格模式（逐步启用）
check_untyped_defs = True
disallow_any_generics = False
disallow_subclassing_any = False
disallow_untyped_calls = False
disallow_untyped_decorators = False
disallow_incomplete_defs = True

# 排除的目录和文件
exclude = (?x)(
    ^venv/
    | ^build/
    | ^dist/
    | ^\.pytest_cache/
    | ^\.mypy_cache/
    | ^htmlcov/
    | ^\.trae/
    | ^\.migration_backup/
    | ^web-app/
    | ^scripts/
    | ^tests/
  )

# 第三方库配置
[mypy-anthropic.*]
ignore_missing_imports = True

[mypy-requests.*]
ignore_missing_imports = True

[mypy-bs4.*]
ignore_missing_imports = True

[mypy-feedparser.*]
ignore_missing_imports = True

[mypy-pandas.*]
ignore_missing_imports = True

[mypy-numpy.*]
ignore_missing_imports = True

[mypy-chromadb.*]
ignore_missing_imports = True

[mypy-apscheduler.*]
ignore_missing_imports = True

[mypy-pytest.*]
ignore_missing_imports = True

[mypy-setuptools.*]
ignore_missing_imports = True

# 项目特定模块配置
[mypy-utils.migration_error_handler]
# 迁移工具暂时放宽检查
disallow_untyped_defs = False
disallow_incomplete_defs = False

[mypy-utils.migration_orchestrator]
# 迁移工具暂时放宽检查
disallow_untyped_defs = False
disallow_incomplete_defs = False

[mypy-utils.documentation_migrator]
# 迁移工具暂时放宽检查
disallow_untyped_defs = False
disallow_incomplete_defs = False

[mypy-utils.config_updater]
# 配置更新工具暂时放宽检查
disallow_untyped_defs = False

[mypy-utils.weather_api]
# 天气API暂时放宽检查（待重构）
disallow_untyped_defs = False

[mypy-utils.weather_client]
# 天气客户端暂时放宽检查（待重构）
disallow_untyped_defs = False

[mypy-agents.*]
# Agent模块暂时放宽检查（待重构）
disallow_untyped_defs = False
disallow_incomplete_defs = False

[mypy-main]
# 主程序暂时放宽检查
disallow_untyped_defs = False

[mypy-demo_run]
# Demo程序暂时放宽检查
disallow_untyped_defs = False
