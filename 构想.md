# 背景
我是大洪，37岁，生活在上海。我既会写代码又会做菜，喜欢跑步、撸铁、读书、听音乐等。平时工作很忙，需要处理很多开发需求和项目管理的事务，同时又要抽时间搞自己的爱好，急需多个AI助理帮我分担压力。

# 目标
**为大洪打造一个高效、智能且实用的生活助理团队**。通过5个AI分身在不同领域提供精准服务，为大洪提供全方位的生活支持，让大洪能够更专注于核心事务。

## 核心能力
- ✅ 智能任务规划与时间管理
- ✅ 自动化信息收集与整理
- ✅ 个性化建议生成（穿搭、饮食、工作计划）
- ✅ 多轮对话引导与深入反思
- ✅ 知识库管理（RAG）与个人记忆更新
- ✅ 飞书集成（推送与共享）

---

# 工作流程设计

## 早间流程（09:00开始）

### 1️⃣ 新闻秘书
**触发方式**：大洪打招呼"早上好"或"开始新的一天"

**执行流程**：
- 🤖 自动抓取AI/科技相关新闻（TechCrunch、The Verge、MIT Tech Review、arXiv等）
- 📝 生成结构化新闻简报：
  - AI技术突破
  - 行业动态
  - 值得关注的内容（3-5条）
  - 每条包含：标题、摘要、链接、重要性评分
- 💾 创建今日日期文件夹（如 `2025-12-04/`）
- 📄 保存为 `新闻简报.md`
- 🚀 可选：推送到飞书工作群

**交互方式**：主动推送 + 大洪可追问细节

---

### 2️⃣ 穿搭秘书
**触发方式**：大洪读完新闻后主动输入"今天穿什么"或者系统自动触发

**执行流程**：
- 👤 咨询对话：
  - "大洪，你今天要去什么场合呢？"（工作、运动、休闲、约会等）
  - "今天有什么特殊安排吗？"
- 🌤️ 抓取实时天气数据（温度、湿度、空气质量）
- 👔 结合大洪风格库生成建议：
  - 场合分析
  - 搭配方案（上下装、鞋帽等）
  - 颜色搭配原理
  - 推荐理由
- 🎨 使用即梦AI生成穿搭效果图
- 💾 保存为 `今日穿搭.md`（包含图片链接）
- 💬 推送给大洪（飞书/本地）

**知识依赖**：
- aboutme.md（个人风格偏好）
- 历史穿搭记录（过往效果分析）

---

### 3️⃣ 工作秘书
**触发方式**：大洪输入"今日工作安排"或系统自动触发

**执行流程**：
- 🔍 **主动提醒**：查阅历史记录，主动提醒：
  - 昨日未完成的TODO
  - 即将到期的重要事项
  - aboutme中的长期目标关联事项
- 💬 **对话收集**：
  - "今天有哪些工作安排呢？"
  - "今天要开什么会？和谁？"
  - "有没有需要我重点关注的项目？"
  - "预估需要多少时间？"
- 🎯 **智能建议**：
  - 根据aboutme中的目标，建议优先级
  - 根据工作经验，估算时间
  - 推荐时间块分配（番茄工作法）
- 📝 **生成今日TODO**：
  - 结构化任务清单（优先级排序）
  - 每个任务包含：名称、时间、地点、相关人员、备注
  - 潜在风险分析
- 💾 保存为 `今日工作.md`
- ♻️ **更新aboutme.md**：新增/更新工作事项段

**知识依赖**：
- aboutme.md（工作目标、长期计划）
- 过往工作日志（模式分析）

---

### 4️⃣ 生活秘书
**触发方式**：大洪完成工作规划后，或主动输入"生活安排"

**执行流程**：
- 🥗 **饮食建议**：
  - "今天中午想吃点什么吗？"
  - 推荐低脂健康餐（结合体重目标）
  - 可选：附近餐厅推荐、外卖链接
  - 营养成分分析
- ⚖️ **体重管理**：
  - "今天体重怎么样？"
  - 记录体重变化（BMI分析）
  - 结合运动计划调整饮食建议
- 📅 **日程提醒**：主动询问并整理
  - "今天有什么重要行程安排吗？"
  - 「长期大事」扫描：
    - 信用卡还款提醒（智能计算账单日）
    - 家人朋友的生日提醒（女儿生日等）
    - 纪念日、重要会议、体检等
- 🎵 **娱乐建议**：
  - 结合天气推荐运动（跑步/撸铁）
  - 音乐播放列表推荐
  - 阅读清单更新
- 💾 保存为 `今日生活.md`

**知识依赖**：
- aboutme.md（个人喜好、家庭信息）
- 历史体重记录
- 财务事件记录

---

## 晚间流程（20:00后）

### 5️⃣ 复盘秘书
**触发方式**：大洪说"今天结束了"或"开始复盘"

**执行流程**：
- 💬 **多轮引导对话**：
  1. **开场**："大洪，今天过得怎么样？有什么想分享的吗？"
  2. **工作维度深入挖掘**：
     - "今天完成了哪些工作？感觉如何？"
     - "有什么让你特别有成就感的事吗？"
     - "遇到了什么挑战？是如何应对的？"
     - "有什么可以改进的地方？"
  3. **学习/成长维度**：
     - "今天有什么新的思考或收获吗？"
     - "有没有发现自己之前的盲区？"
  4. **情绪/能量维度**：
     - "今天的情绪状态如何？是什么影响了？"
     - "能量水平怎么样？有没有做什么事让你更有能量？"
- 🤖 **智能分析**：
  - 读取今日所有文档（新闻、穿搭、工作、生活）
  - 提取关键事件、决策、情绪变化
  - 模式识别（行为习惯、思考盲点）
  - 与历史数据对比（进步趋势、重复性挑战）
- 📊 **生成复盘报告**：
  - 一日总结（工作、生活、学习）
  - **发现模式**：
    - 积极模式（什么让你充电）
    - 消耗模式（什么让你耗能）
    - 决策模式（你是怎么做决定的）
  - **关键洞察**：
    - 今天的新发现
    - 需要调整的认知
  - **充电建议**：
    - 如何保持能量
    - 明日建议（基于body double分析）
- 💾 保存为 `今日复盘.md`
- 🔮 **可选：更新知识库**
  - 将重要洞察加入个人知识RAG
  - 更新长期目标进展

**独特价值**：
- 不只是记录，更是通过对话引导你自我觉察
- 用AI扮演你的「镜像自我」，帮你看见自己的模式
- 结合一天完整数据，提供客观分析视角

**技术特点**：
- 支持多轮对话（至少5轮以上深入挖掘）
- 记忆对话上下文，针对性追问
- 情感分析 + 行为模式识别
- 能量水平评估 + 建议

---

# 技术实现方案

## 项目结构
```
生活助理团队/
├── README.md                      # 项目说明和使用指南
├── main.py                        # 每日流程调度主程序
├── config.ini                     # 配置文件（API密钥、飞书配置等）
├── aboutme.md                     # 用户画像（个人偏好、目标、家庭等）
├── 构想.md                        # 项目构想文档
│
├── agents/                        # 5个智能体实现
│   ├── news_secretary.py          # 新闻秘书
│   ├── outfit_secretary.py        # 穿搭秘书
│   ├── work_secretary.py          # 工作秘书
│   ├── life_secretary.py          # 生活秘书
│   └── review_secretary.py        # 复盘秘书
│
├── data/                          # 数据库存储
│   ├── vector_db/                 # RAG知识库（用于复盘、工作建议等）
│   ├── daily_logs/                # 按日期组织的日志
│   │   └── 2025-12-04/
│   │       ├── 新闻简报.md
│   │       ├── 今日穿搭.md
│   │       ├── 今日工作.md
│   │       ├── 今日生活.md
│   │       └── 今日复盘.md
│   └── knowledge_base/            # 长期知识库
│       ├── personal_memory.md     # 个人记忆库
│       ├── work_experience.md     # 工作经验总结
│       └── outfit_templates.md    # 穿搭模板库
│
├── templates/                     # Markdown模板
│   ├── news_template.md
│   ├── outfit_template.md
│   ├── work_template.md
│   ├── life_template.md
│   └── review_template.md
│
├── utils/                         # 工具模块
│   ├── __init__.py
│   ├── config_loader.py           # 配置加载
│   ├── llm_client.py              # LLM统一接口
│   ├── rag_manager.py             # RAG知识库管理
│   ├── file_manager.py            # 文件操作工具
│   ├── lark_api.py                # 飞书API集成
│   └── image_generator.py         # 图像生成接口
│
├── tests/                         # 测试文件
│   └── test_workflow.py
│
└── requirements.txt               # Python依赖包

```

## 关键技术选型

### 1️⃣ LLM模型（核心）
- **对话与生成**：Claude Sonnet 3.5（主力）
  - 用于：新闻摘要、穿搭建议、工作计划、复盘对话
  - 优势：中文友好、逻辑清晰、支持长上下文
- **快速任务**：Claude Haiku（轻量任务）
  - 用于：简单分类、格式化、关键词提取

### 2️⃣ RAG知识库（长期记忆）
- **向量数据库**：ChromaDB / FAISS
- **应用场景**：
  - 复盘时读取历史经验
  - 工作建议时读取过往相似案例
  - 穿搭推荐时读取历史穿搭效果
  - 学习管理模式、思考习惯等
- **知识库内容**：
  - 个人偏好与风格库
  - 工作经验与技巧
  - 过往复盘洞察
  - 重要决策记录

### 3️⃣ 新闻抓取
- **源**：
  - TechCrunch AI板块
  - The Verge AI新闻
  - MIT Technology Review
  - arXiv每日更新
  - Hugging Face Blog
- **技术**：RSS订阅 + BeautifulSoup4 + Selenium（防反爬）

### 4️⃣ 天气API
- **推荐**：和风天气 / 心知天气 / OpenWeatherMap
- **用途**：穿搭秘书、运动建议

### 5️⃣ 图像生成
- **方案1（推荐）**：即梦AI API（符合大洪审美偏好）
  - 需要：即梦AI账号 + API Key
  - 优势：中文提示友好、风格多样
- **方案2**：Midjourney + Discord Bot
- **方案3**：Stable Diffusion本地部署

### 6️⃣ 飞书集成
- **方案**：飞书开放平台API
  - **功能**：（需要企业飞书账号）
    - 发送消息到指定群/人
    - 上传文件到云空间
    - 创建日程提醒
    - 发送任务列表
- **必要配置**：
  - `LARK_APP_ID`
  - `LARK_APP_SECRET`
  - 或 `LARK_WEBHOOK_URL`（机器人权限）

### 7️⃣ 数据持久化
- **配置文件**：`config.ini`（INI格式）
  - API密钥、账号配置
- **知识库**：Markdown + Vector DB
- **日志**：结构化Markdown
- **定期备份**：每周备份到云服务（阿里云OSS/百度网盘）

### 8️⃣ 工作流调度
- **方式1**：`main.py` 命令行驱动
  - `python main.py --step news` （执行新闻秘书）
  - `python main.py --step outfit` （执行穿搭秘书）
- **方式2**：交互式对话驱动
  - `python main.py` → 进入交互模式，逐步引导
- **方式3**（高级）：定时任务 + 主动推送
  - Linux: `cron` 定时执行
  - macOS: `launchd` 定时任务
  - 主动发起对话（飞书Bot）

---

## 需要的外部API与工具

### 必备API清单
| API/工具 | 用途 | 获取方式 | 备注 |
|---------|-----|--------|------|
| Anthropic Claude API | 所有LLM调用 | https://console.anthropic.com | 必备 |
| 即梦AI API | 生成穿搭图片 | https://jimeng.jianying.com | 强烈推荐 |
| 飞书开放平台 | 消息推送 | https://open.feishu.cn | 可选但推荐 |
| 天气API | 天气数据 | 和风天气/心知天气 | 推荐 |

### 知识库（RAG）结构
```
vector_db/
├── personal_profile          # 个人画像
│   ├── 基本信息
│   ├── 风格偏好
│   ├── 目标与梦想
│   └── 生活习惯
├── work_experience          # 工作经历
│   ├── 项目管理案例
│   ├── 技术方案总结
│   ├── 会议发言
│   └── TODO历史
├── life_records             # 生活记录
│   ├── 体重变化
│   ├── 饮食记录
│   ├── 穿搭历史
│   └── 运动数据
└── reflection_insights      # 复盘洞察
    ├── 行为模式
    ├── 情绪规律
    ├── 关键决策
    └── 成长里程碑
```

### MCP工具集（Model Context Protocol）
每个Agent可以配备以下MCP工具：

#### 🔧 基础工具
- `get_weather()` - 获取实时天气
- `get_date()` - 获取当前日期时间
- `read_file()` - 读取文件
- `write_file()` - 写入文件
- `search_in_knowledge()` - RAG知识库搜索

#### 📰 新闻秘书专用
- `fetch_news_rss()` - 抓取RSS源
- `scrape_website()` - 网页爬取
- `send_to_lark()` - 发送到飞书

#### 👔 穿搭秘书专用
- `generate_image_jimeng()` - 即梦生成图片
- `search_outfit_history()` - 搜索历史穿搭
- `get_weather_forecast()` - 获取天气预报

#### 💼 工作秘书专用
- `add_todo()` - 添加待办
- `update_todo()` - 更新待办状态
- `check_calendar()` - 检查日程
- `search_work_history()` - 搜索工作经历

#### 🏃 生活秘书专用
- `record_weight()` - 记录体重
- `recommend_food()` - 推荐健康餐
- `remind_schedule()` - 提醒日程
- `search_restaurant()` - 搜索餐厅

#### 🧘 复盘秘书专用
- `read_daily_logs()` - 读取今日文档
- `analyze_behavior()` - 行为模式分析
- `send_reflection_q()` - 发送反思问题
- `generate_insight()` - 生成洞察

---

## 关于知识库和文件管理

### 文件夹层级规划
```
生活助理团队/
├── daily_logs/                          # 按日期归档（核心）
│   ├── 2025-12-04/                      # 每日一个文件夹
│   │   └── ... .md
│   └── 2025-12-05/
│       └── ... .md
│
├── data/                                # 数据库
│   ├── vector_db/                       # RAG知识库
│   ├── knowledge_base/                  # 结构化知识库
│   └── history/                         # 历史数据
│       ├── weights.csv                  # 体重记录
│       ├── todos.csv                    # 待办历史
│       └── outfits.json                 # 穿搭数据库
│
├── config/                              # 配置和密钥
│   ├── config.ini                       # 主配置
│   ├── secrets.ini                      # API密钥（gitignore）
│   └── prompts/                         # 提示词模板
│       ├── news.j2                      # Jinja2模板
│       ├── outfit.j2
│       └── review.j2
│
└── templates/                           # Markdown输出模板
    ├── news.md
    ├── outfit.md
    ├── work.md
    ├── life.md
    └── review.md
```

### 需要更新的文档类型
- **静态文档**（人工维护）：
  - `aboutme.md`：个人基础信息
  - `goals.md`：长期目标
  - `style_guide.md`：穿搭风格库

- **动态更新**（Agent自动更新）：
  - `aboutme.md` 中的工作经历、待办事项
  - `knowledge_base/` 下的各类知识文档
  - Vector DB 中的向量化知识

---

# 开发路线图

## Phase 1: MVP（第1周）
- [ ] 实现新闻秘书（基础版）
- [ ] 实现工作秘书（TODO管理）
- [ ] 创建文件管理机制
- [ ] 搭建基础对话流程

## Phase 2: 增强版（第2-3周）
- [ ] 接入RAG知识库
- [ ] 实现穿搭秘书（含图片生成）
- [ ] 实现生活秘书
- [ ] 飞书集成

## Phase 3: 完整版（第4周）
- [ ] 实现复盘秘书（多轮对话）
- [ ] 自动化工作流调度
- [ ] 数据可视化仪表板
- [ ] 长期模式分析与洞察

## Phase 4: 优化期（持续）
- [ ] Prompt工程优化
- [ ] 错误处理与日志
- [ ] 性能优化
- [ ] 备份机制

---

# 总结

## 核心特色
1. **Personalized AI Girlfriend**（女友？）—— 5个专属分身了解你的一切
2. **Full-Stack Lifecycle** —— 从早晨新闻到晚间复盘，覆盖整天
3. **Deep Reflection** —— 不是简单记录，而是引导深度自我觉察
4. **Growing Together** —— Agent通过RAG学习你的行为模式，越用越懂你

## 待确认事项
- [ ] 即梦AI账号申请（需要手机号注册）
- [ ] 飞书开放平台申请（需要企业飞书账号，或有个人机器人的话需要提供配置）
- [ ] 天气API选择
- [ ] 新闻源的最终确认
- [ ] 新闻简报希望多少条？
- [ ] 复盘对话希望几轮？
- [ ] 是否介意我使用SQLite存结构化数据（体重、TODO等）方便查询？
- [ ] 穿搭图片的风格偏好（日系？商务？运动风？）

## 下一步
我建议从Phase 1开始，先做简单可用的新闻秘书 + 工作秘书，跑通工作流程，再逐步叠加功能。你觉得如何？