# Work-Agents 产品需求文档 (PRD)

> **版本**: v1.0
> **状态**: 已确认
> **最后更新**: 2026-02-06
> **产品定位**: 个人智能体工作流编排平台

---

## 1. 产品概述

### 1.1 产品定义

**Work-Agents** 是一个面向个人用户的智能体工作流编排平台，旨在通过自动化重复性工作任务，提升个人工作效率。

**核心公式**：

```
自动化重复任务 + 可视化工作流编排 + 个人内容展示 = 效率提升
```

### 1.2 目标用户

- **用户规模**: 开发者本人（一人使用）
- **扩展规划**: 未来可能开放给家庭成员/小型团队
- **技术背景**: 极客/开发者群体

### 1.3 核心痛点

1. 每日重复性工作消耗大量时间
2. 信息获取分散，需要手动整理
3. 缺乏统一的个人工作管理平台
4. 需要一个展示工作成果的平台

### 1.4 差异化价值

相比现有解决方案（Notion、LobeChat、个人主页）：

- ✅ 智能体编排自动化（不只是对话）
- ✅ 可视化工作流管理
- ✅ 个人效率闭环（News→Task→Life→Review）
- ✅ 极客风格UI设计（赛博朋克美学）

---

## 2. 功能需求

### 2.1 5个核心智能体

#### 2.1.1 News Agent - AI资讯助手

**功能描述**: 每日自动整理全网最新的AI资讯

**数据源**:

- 国际权威媒体: Google Research、MIT Tech Review、Hacker News
- 中文优质资讯: 机器之心、36氪
- 学术前沿: arXiv 最新论文
- 社区讨论: Reddit 热议话题
- **备用源**: AI Base (https://www.aibase.com/zh/news/)

**触发方式**: 每天9:00自动触发

**输出**:

- 新闻标题、摘要、原文链接
- 按来源分类展示

**失败降级**:

- 主源失败 → 尝试备用源
- 都失败 → 显示提示信息

**数据保留**: 15天后自动删除

---

#### 2.1.2 Outfit Agent - 穿搭助手

**功能描述**: 根据天气和日程安排，推荐每日穿搭，并生成穿搭图片

**数据来源**:

- 天气: 公共天气API
- 日程: 从Task Agent获取

**输出**:

- 天气信息卡片
- 穿搭建议文字
- AI生成的穿搭图片（调用Nano Banana API）

**失败降级**:

- Nano Banana API失败 → 显示占位图 + 文字建议

**触发方式**: 打开页面时加载

**数据保留**: 15天后自动删除

---

#### 2.1.3 Task Agent - 任务助手

**功能描述**: 根据用户提供的问答表单，生成今日待办事项

**交互方式**:

- 固定表单填写（5-8个问题）
- 可展示推荐问题引导用户

**表单内容示例**:

1. 今天最重要的3件事是什么？
2. 今天有哪些会议/约会？
3. 今天的精力状态如何？（高/中/低）
4. 今天有哪些截止日期？

**输出**:

- AI生成的今日待办列表
- 页面以图表形式展示
- 保存到数据库

**触发方式**: 打开页面时加载，用户手动填写

**数据保留**: 15天后自动删除

---

#### 2.1.4 Life Agent - 生活助手

**功能描述**: 结构化存储健康指标，生成今日饮食、运动建议

**输入方式**:

- 用户手动填写或选择
- 分为饮食和运动两大类

**健康指标**:

- 身高、体重、健康状况
- 运动频率、饮食偏好
- 睡眠时长、精力水平

**输出**:

- 图文卡片形式展示
- 今日饮食建议
- 今日运动建议

**触发方式**: 打开页面时加载，用户手动填写

**数据保留**: 15天后自动删除

---

#### 2.1.5 Review Agent - 复盘助手

**功能描述**: 今日复盘，反思与洞察，总结今日工作，自动提取并更新用户偏好

**数据来源**:

- Task Agent生成的任务
- Life Agent记录的健康数据

**输出**:

- 任务完成情况统计（表格展示）
- 健康数据汇总
- AI生成的复盘建议
- 自动提取的用户偏好更新

**用户偏好存储内容**:

- 身高、体重、健康状况
- 运动频率、饮食偏好
- 工作习惯、学习偏好

**触发方式**: 晚上手动点击触发

**数据保留**: 15天后自动删除

---

### 2.2 LobeChat AI对话

**功能定位**: 基础AI对话功能，集成到Agents页面

**实现需求**:

- 需要UI组件
- 需要服务端功能
- WebSocket实时通信

**交互方式**:

- 用户可以与AI自由对话
- 与5个内部智能体的交互不同（智能体只有问题/点击/浏览交互）

---

### 2.3 工具管理 (Tools)

**功能描述**: 日常工作常用工具的集合

**工具类型**:

- Markdown预览
- 在线生成头像
- JSON格式化
- 代码格式化
- 统计字数
- 中英文互译

**展示方式**:

- 分类网格/列表
- 支持搜索和分类筛选

---

### 2.4 实验室 (Labs)

**功能描述**: 试验探索性产品展示

**示例内容**:

- 贪吃蛇小游戏
- 在线画板
- 你画我猜

**展示方式**:

- 卡片式布局
- 名称、状态标签（实验性/预览版）
- 描述和体验链接

**说明**: 在线计数器只是一个示例，不一定要实现；游戏不需要实时对战

---

### 2.5 博客系统 (Blog)

**内容来源**:

- 经验总结
- 工作总结
- 学习笔记

**功能**:

- 文章列表
- 支持标签/日期筛选
- 全局搜索
- 详情页带"Edit"链接指向管理系统

**访问权限**: 完全公开

---

### 2.6 管理后台

**功能模块**:

- **Dashboard**: 可视化指标和分析图表（智能体工作流程、数据流、API调用情况、运行日志/性能指标/错误告警）
- **Agents**: 智能体配置完整CRUD
- **Blogs**: 表格视图（标题、摘要、日期、状态），富文本编辑器支持Markdown预览
- **Tools/Labs**: 条目管理界面，支持排序和分类
- **Profile**: 用户信息管理和密码修改
- **Settings**: 全局系统配置选项

**设计风格**: 现代、高科技仪表板界面，深色侧边栏导航

---

## 3. 工作流编排

### 3.1 编排定义

**编排方式**:

- 条件触发
- 工作流串联
- 流程可视化

**工作流组成**:
5个智能体组成完整工作流：

```
每天第一次打开页面 → 自动执行News+Outfit → 填写Task表单 → 填写Life表单 → 晚上点击Review查看复盘
```

**流程特点**:

- 不需要强制的流程依赖
- Task Agent和Life Agent的数据自动流入Review Agent
- 工作流中需要包含等待用户输入的节点

### 3.2 可视化展示

**展示形式**:

- 甘特图，或更好的图表
- 展示智能体的工作流程
- 节点式流程图（推荐，类似n8n）

**工作流状态**:

- 进行中 / 已完成 / 取消
- 状态保存在数据库

---

## 4. 技术架构

### 4.1 技术栈

**前端**:

- Next.js 15.5 (App Router)
- React 19.1
- TypeScript 5.x
- Tailwind CSS 4.x (Genesis Design System)
- Shadcn/UI
- Framer Motion
- TanStack Query
- Zustand

**后端**:

- Python 3.11+
- FastAPI
- SQLAlchemy 2.0
- Alembic
- Pydantic v2

**数据库**:

- SQLite (轻量化，适合个人使用)
- 位置: `backend/data/work_agents.db`

**智能体框架**:

- LangChain（或推荐更简单的框架）
- 本地Ollama大模型调用

### 4.2 设计系统

**Genesis Design System**:

- **核心配色**: 深渊黑(#0a0a0f) + 电光青(#00f2ff) + 霓虹紫(#bc13fe)
- **设计风格**: 赛博朋克 + 玻璃态 + 极简主义
- **动效标准**: Spring物理引擎（stiffness: 100, damping: 20）

### 4.3 数据管理

**数据保留策略**:

- 智能体生成内容: 15天后自动删除
- 用户偏好: 永久保存（个人中心）
- 博客文章: 永久保存

**API密钥管理**:

- 保存在.env文件中
- .gitignore忽略
- 包括: OpenAI/Ollama API、天气API、Nano Banana API等

---

## 5. 用户认证

### 5.1 认证方式

- JWT认证，支持刷新令牌
- 受保护的 `/admin/*` 路由
- 基于角色的访问控制（admin > editor > viewer）

### 5.2 使用场景

- 前端WEB页面右上角有登录、注册按钮
- 需要编辑博客、智能体、工具、Labs时，需要登录
- 普通浏览（News、Blog阅读）不需要登录

### 5.3 扩展规划

- 以后扩展增加多个角色
- 例如开放游客访问后台的权限

### 5.4 账户安全

- 找回密码功能
- 修改密码功能
- 速率限制：每IP每分钟100请求

---

## 6. 性能要求

### 6.1 性能指标

- **首屏加载** (LCP): < 1.5s
- **API响应** (P95): < 200ms
- **动画帧率**: 60fps
- **并发用户**: 500+在线用户

### 6.2 优化策略

**前端**:

- 代码分割和懒加载
- WebP格式图片优化
- 浏览器缓存策略
- Bundle分析和大小优化

**后端**:

- 数据库查询优化和索引
- 热点数据缓存
- 大数据集分页处理

---

## 7. 可观测性

### 7.1 监控内容

**Dashboard展示**:

- 智能体工作流程
- 数据流
- API调用情况
- 智能体运行日志
- 性能指标
- 错误告警

### 7.2 实现方式

- Dashboard页面展示
- 不需要额外的监控页面
- 集成到管理后台

---

## 8. 部署与运维

### 8.1 部署架构

- Docker容器化
- 分离前端/后端/数据库服务
- Nginx反向代理
- SSL/HTTPS强制

### 8.2 CI/CD

- 自动化CI/CD流水线
- 集成测试
- 环境特定配置（开发/预发布/生产）

### 8.3 数据库迁移

- Alembic数据库迁移
- 支持schema更新

---

## 9. 开发计划

### 9.1 MVP范围（3周交付）

> **详细定义**: 详见 [MVP-SCOPE.md](./MVP-SCOPE.md)

**核心价值**: 智能体工作流编排 = 自动化信息获取 + 任务管理 + 数据复盘 + 流程可视化

**第一阶段（MVP，3周）核心闭环**:

- ✅ 用户认证（登录/注册 + JWT）
- ✅ News Agent（自动爬取 + AI摘要 + 每日9:00触发）
- ✅ Task Agent（表单 + AI生成任务）
- ✅ Review Agent（数据汇总 + AI复盘 + 用户偏好提取）
- ✅ 基础工作流编排（状态指示器）
- ✅ Home页仪表板
- ✅ 管理后台基础功能
- ✅ Docker部署

**MVP排除功能**（移至Phase 4）:

- ❌ Outfit Agent（依赖外部API）
- ❌ Life Agent（非核心闭环）
- ❌ LobeChat集成（需要WebSocket）
- ❌ Tools/Labs/Blog完整功能
- ❌ 高级工作流编排（条件分支、循环）
- ❌ 审计日志完整版

**第二阶段（体验提升，Phase 4）**:

- Outfit Agent（天气API + 图片生成）
- Life Agent（健康记录 + 建议）
- 工作流可视化升级（节点图）
- LobeChat集成（WebSocket实时通信）

**第三阶段（完整产品，Phase 5+）**:

- Tools/Labs/Blog完整功能
- 可观测性Dashboard（监控、日志）
- 移动端优化
- 性能优化（Redis缓存、CDN）

### 9.2 敏捷冲刺安排

**Week 1**: 基础架构 + News Agent

- Day 1-2: Next.js项目初始化 + Genesis Design System
- Day 3-4: FastAPI后端 + JWT认证
- Day 5-7: News Agent爬虫 + 前端展示

**Week 2**: Task Agent + Review Agent闭环

- Day 8-9: Task Agent表单功能
- Day 10-11: Review Agent数据汇总
- Day 12-14: Home页仪表板整合

**Week 3**: 工作流编排 + 优化

- Day 15-17: 基础工作流编排
- Day 18-19: UI动效优化
- Day 20-21: 测试与部署准备

---

## 10. 风险与应对

### 10.1 技术风险

| 风险                | 影响             | 应对方案                                    |
| ------------------- | ---------------- | ------------------------------------------- |
| LangChain集成复杂   | 开发进度延迟     | 先用简单版本（直接调用Ollama），MVP后再引入 |
| News爬取稳定性      | 功能不可用       | RSS订阅作为备选 + 手动添加链接功能          |
| UI动效性能          | 低端设备卡顿     | 自动降级 + 节能模式选项                     |
| Nano Banana API失败 | 穿搭图片无法显示 | 显示占位图 + 文字建议                       |

### 10.2 产品风险

| 风险         | 影响         | 应对方案                   |
| ------------ | ------------ | -------------------------- |
| 功能范围过大 | 无法按时交付 | 明确MVP边界，分阶段实现    |
| 用户需求变化 | 返工         | 快速迭代，每周交付可用版本 |

---

## 11. 附录

### 11.1 参考资源

- 设计参考: https://clawdbotai.co
- 架构设计: `docs/design/architecture.md`
- API设计: `docs/design/api-design.md`
- 数据库设计: `docs/design/database-schema.md`
- 前端规范: `docs/design/frontend-guide.md`

### 11.2 问答记录

详细的需求访谈记录见: `docs/planning/QA.md`

### 11.3 变更历史

| 版本 | 日期       | 变更内容                      |
| ---- | ---------- | ----------------------------- |
| v1.0 | 2026-02-06 | 初始版本，基于6轮需求访谈整理 |

---

**文档结束**

> 本产品需求文档基于深度用户访谈整理，所有功能需求已得到用户确认。
> 开发过程中如有需求变更，请更新本文档并记录变更历史。
