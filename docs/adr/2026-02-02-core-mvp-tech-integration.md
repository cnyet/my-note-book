# ADR: Web-Agents MVP 核心技术决策集成

**日期**: 2026-02-02  
**状态**: 已接受  
**关联提案**: `docs/requirement-addendum.md`

## 背景 (Context)
在项目初期，关于 LobeChat 的集成深度、高并发下的数据一致性处理以及媒体存储方案存在模糊地带。为了确保 MVP 阶段的快速交付与系统稳定性，需要明确技术选型边界。

## 决策 (Decision)
1.  **LobeChat 集成**: 采用纯 iframe 嵌入。不实现服务端 SSO 同步，通过 URL 参数进行 Agent 状态引导。
2.  **并发与数据库**: 坚持使用 SQLite。通过应用层（FastAPI）串行化写操作来规避并发冲突，读请求保持高性能。
3.  **媒体存储**: 采用服务器本地文件系统存储（`/public/uploads`），数据库仅记录路径，不使用对象存储。
4.  **实时性处理**: 放弃 WebSocket 方案，采用前台轮询（Polling）实现简单的实时计数（如 Labs 在线人数）。
5.  **SEO 策略**: 引入 CRUD 可选字段与自动截取相结合的混合方案。

## 后果 (Consequences)
- **正面**: 极大地简化了系统架构，降低了运维复杂度，提升了首屏加载性能。
- **负面**: 缺乏跨组件的深度用户状态同步；在高频写操作下性能受限（虽然在本项目场景下并非瓶颈）。

---
**确认人**: USER & AI Assistant
